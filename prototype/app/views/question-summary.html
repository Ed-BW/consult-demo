{% extends "layouts/main.html" %}

{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/pagination/macro.njk" import govukPagination %}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}

{% set pageName="Home" %}

{% block beforeMain %}
  {{ govukBackLink({
    text: "Back to all questions",
    href: "/"
  }) }}
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-l">Question summary</h1>
    <p>{{data.questions[0]}}</p>
    {{ govukSummaryList({
      rows: [
        {
          key: {
            text: "Agree"
          },
          value: {
            text: "63%"
          }
        },
        {
          key: {
            text: "Disagree"
          },
          value: {
            text: "33%"
          }
        },
        {
          key: {
            text: "Not sure"
          },
          value: {
            text: "3%"
          }
        }
      ]
    }) }}
  </div>
  <div class="govuk-grid-column-one-third">
    <canvas data-yes="63" data-no="31" data-labels="true"></canvas>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    {#<h2 class="govuk-heading-m">Prevalent themes</h2>#}
    {#<canvas id="prevalent-themes"></canvas>#}
    
    {% set themes = [
      {"theme": "Preventing related illnesses starts now", value: 671},
      {"theme": "... is becoming increasingly popular among young people who perceive it as a safer alternative.", value: 443},
      {"theme": "Strong public opposition to change in sale ages", value: 163},
      {"theme": "Limit children's access to products", value: 136},
      {"theme": "Legalise ban on products for current and future generations", value: 127},
      {"theme": "Age of sale for products should be changed to eradicate ...", value: 112},
      {"theme": "It is harmful and should not be legally sold to anyone born after 1 January 2009", value: 105},
      {"theme": "... and ... both need to be completely unavailable", value: 91},
      {"theme": "Protect future generations from the harmful effects", value: 84},
      {"theme": "The majority of respondents support raising the legal age of sale for products to 18 years old in the UK, believing it will help reduce peer pressure among young people", value: 81}
    ] %}

    {% set highestCount = themes[0].value %}

    <table class="govuk-table">
      <caption class="govuk-table__caption govuk-table__caption--s">
        <h2>Prevalent themes</h2>
      </caption>
      <thead class="govuk-table__head">
        <tr class="govuk-table__row">
          <th scope="col" class="govuk-table__header">Theme</th>
          <th scope="col" class="govuk-table__header">Number of respondents</th>
        </tr>
      </thead>
      <tbody class="govuk-table__body">
        {% for item in themes %}
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">{{item.theme}}</th>
            <td class="govuk-table__cell">
              <span class="iai-bar">
                <span class="iai-bar__value">{{item.value}}</span>
                <span class="iai-bar__bar js-bar" style="width: {{(item.value / highestCount) * 100}}%;"></span>
              </span>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    
  </div>
</div>

{% endblock %}
